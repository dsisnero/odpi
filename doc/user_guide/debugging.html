<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>ODPI-C Debugging &#8212; ODPI-C v4.6.1</title>
    
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="ODPI-C v4.6.1" href="../index.html" />
    <link rel="up" title="ODPI-C User Guide" href="index.html" />
    <link rel="next" title="ODPI-C Function Round-Trips" href="round_trips.html" />
    <link rel="prev" title="ODPI-C Data Type Support" href="data_types.html" /> 
  </head>
  <body role="document">
<div class="header">
<a href="https://oracle.github.io/odpi/doc">Doc Home</a>
</div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
             <section id="odpi-c-debugging">
<span id="debugging"></span><h1>ODPI-C Debugging<a class="headerlink" href="#odpi-c-debugging" title="Permalink to this heading">¶</a></h1>
<section id="level">
<h2>Level<a class="headerlink" href="#level" title="Permalink to this heading">¶</a></h2>
<p>The environment variable DPI_DEBUG_LEVEL can be used to selectively turn on
the printing of various logging messages as defined in the following table. All
messages are printed to stderr. Each level is independent of all other levels
and the values of each level can be added to one another to choose which
messages will be printed.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Level</p></th>
<th class="head"><p>Hex Value</p></th>
<th class="head"><p>Decimal Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DPI_DEBUG_LEVEL_UNREPORTED_ERRORS</p></td>
<td><p>0x0001</p></td>
<td><p>1</p></td>
<td><p>Prints messages when unreported errors take place (such as when an
error takes place during the freeing of OCI handles and descriptors)</p></td>
</tr>
<tr class="row-odd"><td><p>DPI_DEBUG_LEVEL_REFS</p></td>
<td><p>0x0002</p></td>
<td><p>2</p></td>
<td><p>Prints messages when reference counts are added and released</p></td>
</tr>
<tr class="row-even"><td><p>DPI_DEBUG_LEVEL_FNS</p></td>
<td><p>0x0004</p></td>
<td><p>4</p></td>
<td><p>Prints messages when a public ODPI-C function is called</p></td>
</tr>
<tr class="row-odd"><td><p>DPI_DEBUG_LEVEL_ERRORS</p></td>
<td><p>0x0008</p></td>
<td><p>8</p></td>
<td><p>Prints messages when an error is raised</p></td>
</tr>
<tr class="row-even"><td><p>DPI_DEBUG_LEVEL_SQL</p></td>
<td><p>0x0010</p></td>
<td><p>16</p></td>
<td><p>Prints the text of all SQL that is prepared. Bind values are not
displayed.</p></td>
</tr>
<tr class="row-odd"><td><p>DPI_DEBUG_LEVEL_MEM</p></td>
<td><p>0x0020</p></td>
<td><p>32</p></td>
<td><p>Prints the location and size of all memory allocations and frees
performed by the library.</p></td>
</tr>
<tr class="row-even"><td><p>DPI_DEBUG_LEVEL_LOAD_LIB</p></td>
<td><p>0x0040</p></td>
<td><p>64</p></td>
<td><p>Prints the methods and locations searched for the Oracle Client library
in addition to any errors that took place</p></td>
</tr>
</tbody>
</table>
</section>
<section id="prefix">
<h2>Prefix<a class="headerlink" href="#prefix" title="Permalink to this heading">¶</a></h2>
<p>The environment variable DPI_DEBUG_PREFIX can be used to specify the prefix
that is printed in front of each debugging message. If not set, the default
prefix is <code class="docutils literal notranslate"><span class="pre">&quot;ODPI</span> <span class="pre">[%i]</span> <span class="pre">%d</span> <span class="pre">%t:</span> <span class="pre">&quot;</span></code>. The maximum length of the prefix string that
can be set is 64 characters. If an attempt is made to set a value longer than
that, it is ignored and the default prefix is used instead.</p>
<p>The following directives can be used within the prefix:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Directive</p></th>
<th class="head"><p>Comments</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>%i</p></td>
<td><p>Replaced by the identifier of the thread that is printing the message</p></td>
</tr>
<tr class="row-odd"><td><p>%d</p></td>
<td><p>Replaced by the date the message is printed, in the format YYYY/MM/DD</p></td>
</tr>
<tr class="row-even"><td><p>%t</p></td>
<td><p>Replaced by the time the message is printed, in the format HH:MM:SS.SSS</p></td>
</tr>
</tbody>
</table>
<p>All other characters in the prefix are copied unchanged to the output.</p>
</section>
<section id="memory-tracing">
<h2>Memory Tracing<a class="headerlink" href="#memory-tracing" title="Permalink to this heading">¶</a></h2>
<p>The Python script <a class="reference external" href="https://github.com/oracle/odpi/blob/main/util/tracing/mem_leak.py">mem_leak.py</a> can be used to
search for memory leaks. The script’s argument should be the name of a file
containing trace output when DPI_DEBUG_LEVEL is set to DPI_DEBUG_LEVEL_MEM:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">DPI_DEBUG_LEVEL</span><span class="o">=</span><span class="mi">32</span>
<span class="o">./</span><span class="n">myprog</span> <span class="o">&gt;&amp;</span> <span class="n">mem</span><span class="o">.</span><span class="n">log</span>
<span class="n">python</span> <span class="n">mem_leak</span><span class="o">.</span><span class="n">py</span> <span class="n">mem</span><span class="o">.</span><span class="n">log</span>
</pre></div>
</div>
</section>
</section>
 
          </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
      &#169; Copyright 2016, 2022, Oracle and/or its affiliates. All rights reserved.
    </div>
  </body>
</html>