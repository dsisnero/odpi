<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ODPI-C SODA Document Functions &#8212; ODPI-C v4.6.0</title>
    
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="ODPI-C v4.6.0" href="../index.html" />
    <link rel="up" title="ODPI-C Functions" href="index.html" />
    <link rel="next" title="ODPI-C SODA Document Cursor Functions" href="dpiSodaDocCursor.html" />
    <link rel="prev" title="ODPI-C SODA Database Functions" href="dpiSodaDb.html" /> 
  </head>
  <body role="document">
<div class="header">
<a href="https://oracle.github.io/odpi/doc">Doc Home</a>
</div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
             <section id="odpi-c-soda-document-functions">
<span id="dpisodadocfunctions"></span><h1>ODPI-C SODA Document Functions<a class="headerlink" href="#odpi-c-soda-document-functions" title="Permalink to this headline">¶</a></h1>
<p>SODA document handles are used to represent SODA documents in the database.
They are created by calling one of the functions
<a class="reference internal" href="dpiSodaDb.html#c.dpiSodaDb_createDocument" title="dpiSodaDb_createDocument"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSodaDb_createDocument()</span></code></a>, <a class="reference internal" href="dpiSodaDocCursor.html#c.dpiSodaDocCursor_getNext" title="dpiSodaDocCursor_getNext"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSodaDocCursor_getNext()</span></code></a>,
<a class="reference internal" href="dpiSodaColl.html#c.dpiSodaColl_findOne" title="dpiSodaColl_findOne"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSodaColl_findOne()</span></code></a>, <a class="reference internal" href="dpiSodaColl.html#c.dpiSodaColl_getDataGuide" title="dpiSodaColl_getDataGuide"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSodaColl_getDataGuide()</span></code></a>,
<a class="reference internal" href="dpiSodaColl.html#c.dpiSodaColl_insertMany" title="dpiSodaColl_insertMany"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSodaColl_insertMany()</span></code></a>, <a class="reference internal" href="dpiSodaColl.html#c.dpiSodaColl_insertOne" title="dpiSodaColl_insertOne"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSodaColl_insertOne()</span></code></a>,
<a class="reference internal" href="dpiSodaColl.html#c.dpiSodaColl_replaceOne" title="dpiSodaColl_replaceOne"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSodaColl_replaceOne()</span></code></a> or <a class="reference internal" href="dpiSodaColl.html#c.dpiSodaColl_save" title="dpiSodaColl_save"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSodaColl_save()</span></code></a> and
are destroyed when the last reference is released by calling the function
<a class="reference internal" href="#c.dpiSodaDoc_release" title="dpiSodaDoc_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSodaDoc_release()</span></code></a>.</p>
<p>See <a class="reference external" href="https://github.com/oracle/odpi/issues/110">this tracking issue</a> for
known issues with SODA.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.dpiSodaDoc_addRef">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiSodaDoc_addRef</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiSodaDoc</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">doc</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiSodaDoc_addRef" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Adds a reference to the SODA document. This is intended for situations
where a reference to the document needs to be maintained independently of
the reference returned when the document was created.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>doc</strong> [IN] – the document to which a reference is to be added. If the
reference is NULL or invalid, an error is returned.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiSodaDoc_getContent">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiSodaDoc_getContent</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiSodaDoc</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">doc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">value</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">valueLength</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">encoding</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiSodaDoc_getContent" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns the content of the document.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>doc</strong> [IN] – a reference to the document from which the content is to be
retrieved. If the reference is NULL or invalid, an error is returned.</p>
<p><strong>value</strong> [OUT] – a pointer to the document content, as a byte string,
which will be populated upon successful comletion of this function. The
pointer returned will remain valid as long as a reference to the document
is held.</p>
<p><strong>valueLength</strong> [OUT] – a pointer to the length of the document content,
in bytes, which will be populated upon successful completion of this
function.</p>
<p><strong>encoding</strong> [OUT] – a pointer to the the encoding in which the content
was stored, which will be populated upon successful completion of this
function. If the document content is not “application/json”, a NULL value
will be returned.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiSodaDoc_getCreatedOn">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiSodaDoc_getCreatedOn</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiSodaDoc</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">doc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">value</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">valueLength</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiSodaDoc_getCreatedOn" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns the timestamp when the document was created, as a string, in ISO
format. This value will be empty if the metadata used to create the
collection in which the document is found does not support the storage of
this attribute, or if the document was created using
<a class="reference internal" href="dpiSodaDb.html#c.dpiSodaDb_createDocument" title="dpiSodaDb_createDocument"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSodaDb_createDocument()</span></code></a>.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>doc</strong> [IN] – a reference to the document from which the creation
timestamp is to be retrieved. If the reference is NULL or invalid, an error
is returned.</p>
<p><strong>value</strong> [OUT] – a pointer to the document creation timestamp, as a byte
string in the encoding used for CHAR data, which will be populated upon
successful completion of this function. The pointer returned will remain
valid as long as a reference to the document is held.</p>
<p><strong>valueLength</strong> [OUT] – a pointer to the length of the document creation
timestamp, in bytes, which will be populated upon successful completion of
this function.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiSodaDoc_getKey">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiSodaDoc_getKey</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiSodaDoc</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">doc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">value</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">valueLength</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiSodaDoc_getKey" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns the key that uniquely identifies the document in the collection.
This value will be empty if no key was supplied when the document was
created using <a class="reference internal" href="dpiSodaDb.html#c.dpiSodaDb_createDocument" title="dpiSodaDb_createDocument"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSodaDb_createDocument()</span></code></a>.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>doc</strong> [IN] – a reference to the document from which the key is to be
retrieved. If the reference is NULL or invalid, an error is returned.</p>
<p><strong>value</strong> [OUT] – a pointer to the document key, as a byte string in the
encoding used for CHAR data, which will be populated upon successful
completion of this function. The pointer returned will remain valid as long
as a reference to the document is held.</p>
<p><strong>valueLength</strong> [OUT] – a pointer to the length of the document key, in
bytes, which will be populated upon successful completion of this function.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiSodaDoc_getLastModified">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiSodaDoc_getLastModified</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiSodaDoc</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">doc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">value</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">valueLength</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiSodaDoc_getLastModified" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns the timestamp when the document was last modified, as a string, in
ISO format. This value will be empty if the metadata used to create the
collection in which the document is found does not support the storage of
this attribute, or if the document was created using
<a class="reference internal" href="dpiSodaDb.html#c.dpiSodaDb_createDocument" title="dpiSodaDb_createDocument"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSodaDb_createDocument()</span></code></a>.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>doc</strong> [IN] – a reference to the document from which the last modified
timestamp is to be retrieved. If the reference is NULL or invalid, an error
is returned.</p>
<p><strong>value</strong> [OUT] – a pointer to the document last modified timestamp, as a
byte string in the encoding used for CHAR data, which will be populated
upon successful completion of this function. The pointer returned will
remain valid as long as a reference to the document is held.</p>
<p><strong>valueLength</strong> [OUT] – a pointer to the length of the document last
modified timestamp, in bytes, which will be populated upon successful
completion of this function.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiSodaDoc_getMediaType">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiSodaDoc_getMediaType</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiSodaDoc</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">doc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">value</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">valueLength</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiSodaDoc_getMediaType" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns the media type of the document.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>doc</strong> [IN] – a reference to the document from which the media type is to
be retrieved. If the reference is NULL or invalid, an error is returned.</p>
<p><strong>value</strong> [OUT] – a pointer to the media type, as a byte string in the
encoding used for CHAR data, which will be populated upon successful
completion of this function. The pointer returned will remain valid as long
as a reference to the document is held.</p>
<p><strong>valueLength</strong> [OUT] – a pointer to the length of the media type, in
bytes, which will be populated upon successful completion of this function.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiSodaDoc_getVersion">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiSodaDoc_getVersion</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiSodaDoc</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">doc</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">value</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">valueLength</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiSodaDoc_getVersion" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns the current version of the document. This value will be empty if
the metadata used to create the collection in which the document is found
does not support the storage of this attribute, or if the document was
created using <a class="reference internal" href="dpiSodaDb.html#c.dpiSodaDb_createDocument" title="dpiSodaDb_createDocument"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSodaDb_createDocument()</span></code></a>.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>doc</strong> [IN] – a reference to the document from which the version is to be
retrieved. If the reference is NULL or invalid, an error is returned.</p>
<p><strong>value</strong> [OUT] – a pointer to the version, as a byte string in the
encoding used for CHAR data, which will be populated upon successful
completion of this function. The pointer returned will remain valid as long
as a reference to the document is held.</p>
<p><strong>valueLength</strong> [OUT] – a pointer to the length of the version, in bytes,
which will be populated upon successful completion of this function.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiSodaDoc_release">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiSodaDoc_release</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiSodaDoc</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">doc</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiSodaDoc_release" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Releases a reference to the SODA document. A count of the references to
the document is maintained and when this count reaches zero, the memory
associated with the document is freed.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>doc</strong> [IN] – the document from which a reference is to be released. If
the reference is NULL or invalid, an error is returned.</p>
</dd></dl>

</section>
 
          </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
      &#169; Copyright 2016, 2022, Oracle and/or its affiliates. All rights reserved.
    </div>
  </body>
</html>