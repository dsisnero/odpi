<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>ODPI-C Subscription Functions &#8212; ODPI-C v4.6.0</title>
    
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="ODPI-C v4.6.0" href="../index.html" />
    <link rel="up" title="ODPI-C Functions" href="index.html" />
    <link rel="next" title="ODPI-C Variable Functions" href="dpiVar.html" />
    <link rel="prev" title="ODPI-C Statement Functions" href="dpiStmt.html" /> 
  </head>
  <body role="document">
<div class="header">
<a href="https://oracle.github.io/odpi/doc">Doc Home</a>
</div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
             <section id="odpi-c-subscription-functions">
<span id="dpisubscrfunctions"></span><h1>ODPI-C Subscription Functions<a class="headerlink" href="#odpi-c-subscription-functions" title="Permalink to this headline">¶</a></h1>
<p>Subscription handles are used to represent subscriptions to events such as
continuous query notification and object change notification. They are created
by calling the function <a class="reference internal" href="dpiConn.html#c.dpiConn_subscribe" title="dpiConn_subscribe"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiConn_subscribe()</span></code></a> and are destroyed
by calling the function <a class="reference internal" href="dpiConn.html#c.dpiConn_unsubscribe" title="dpiConn_unsubscribe"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiConn_unsubscribe()</span></code></a> or releasing the last
reference by calling the function <a class="reference internal" href="#c.dpiSubscr_release" title="dpiSubscr_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiSubscr_release()</span></code></a>.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.dpiSubscr_addRef">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiSubscr_addRef</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiSubscr</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">subscr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiSubscr_addRef" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Adds a reference to the subscription. This is intended for situations where
a reference to the subscription needs to be maintained independently of the
reference returned when the subscription was created.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>subscr</strong> [IN] – the subscription to which a reference is to be added. If
the reference is NULL or invalid, an error is returned.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiSubscr_prepareStmt">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiSubscr_prepareStmt</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiSubscr</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">subscr</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sql</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">sqlLength</span></span>, <span class="n"><span class="pre">dpiStmt</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">stmt</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiSubscr_prepareStmt" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Prepares a statement for registration on the subscription. The statement is
then registered by calling the function <a class="reference internal" href="dpiStmt.html#c.dpiStmt_execute" title="dpiStmt_execute"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiStmt_execute()</span></code></a>. The
reference to the statement that is returned should be released as soon as
it is no longer needed.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>subscr</strong> [IN] – a reference to the subscription on which the statement
is to be prepared for registration. If the reference is NULL or invalid, an
error is returned.</p>
<p><strong>sql</strong> [IN] – the SQL that is to be prepared, as a byte string in the
encoding used for CHAR data.</p>
<p><strong>sqlLength</strong> [IN] – the length of the sql parameter, in bytes.</p>
<p><strong>stmt</strong> [OUT] – a reference to the statement that was prepared, which
will be populated when the function completes successfully.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiSubscr_release">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiSubscr_release</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiSubscr</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">subscr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiSubscr_release" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Releases a reference to the subscription. A count of the references to the
subscription is maintained and when this count reaches zero, the memory
associated with the subscription is freed. The subscription is also
deregistered so that notifications are no longer sent, if this was not
already done using the function <a class="reference internal" href="dpiConn.html#c.dpiConn_unsubscribe" title="dpiConn_unsubscribe"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiConn_unsubscribe()</span></code></a>.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>subscr</strong> [IN] – the subscription from which a reference is to be
released. If the reference is NULL or invalid, an error is returned.</p>
</dd></dl>

</section>
 
          </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
      &#169; Copyright 2016, 2022, Oracle and/or its affiliates. All rights reserved.
    </div>
  </body>
</html>