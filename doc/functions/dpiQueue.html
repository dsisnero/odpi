<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>ODPI-C Queue Functions &#8212; ODPI-C v4.6.1</title>
    
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/theme.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="ODPI-C v4.6.1" href="../index.html" />
    <link rel="up" title="ODPI-C Functions" href="index.html" />
    <link rel="next" title="ODPI-C Rowid Functions" href="dpiRowid.html" />
    <link rel="prev" title="ODPI-C Pool Functions" href="dpiPool.html" /> 
  </head>
  <body role="document">
<div class="header">
<a href="https://oracle.github.io/odpi/doc">Doc Home</a>
</div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
             <section id="odpi-c-queue-functions">
<span id="dpiqueue"></span><h1>ODPI-C Queue Functions<a class="headerlink" href="#odpi-c-queue-functions" title="Permalink to this heading">¶</a></h1>
<p>Queue handles are used to represent Advanced Queueing (AQ) queues. They are
created by calling the function <a class="reference internal" href="dpiConn.html#c.dpiConn_newQueue" title="dpiConn_newQueue"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiConn_newQueue()</span></code></a> and are destroyed
when the last reference is released by calling the function
<a class="reference internal" href="#c.dpiQueue_release" title="dpiQueue_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiQueue_release()</span></code></a>.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.dpiQueue_addRef">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiQueue_addRef</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiQueue</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">queue</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiQueue_addRef" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Adds a reference to the queue. This is intended for situations where a
reference to the queue needs to be maintained independently of the
reference returned when the queue was created.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>queue</strong> [IN] – the queue to which a reference is to be added. If the
reference is NULL or invalid, an error is returned.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiQueue_deqMany">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiQueue_deqMany</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiQueue</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">queue</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">numProps</span></span>, <span class="n"><span class="pre">dpiMsgProps</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">props</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiQueue_deqMany" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Dequeues multiple messages from the queue.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>queue</strong> [IN] – the queue from which messages are to be dequeued. If the
reference is NULL or invalid, an error is returned.</p>
<p><strong>numProps</strong> [IN/OUT] – a pointer to the number of elements in the props
array. When the function is called, the value refers to the length of the
props array and the maximum number of messages that should be dequeued.
After the function has completed successfully, the value refers to the
number of messages that were actually dequeued from the queue.</p>
<p><strong>props</strong> [OUT] – an array of references to message properties which will
be populated upon successful completion of this function. Each of these
references should be released when they are no longer needed by calling the
function <a class="reference internal" href="dpiMsgProps.html#c.dpiMsgProps_release" title="dpiMsgProps_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiMsgProps_release()</span></code></a>.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiQueue_deqOne">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiQueue_deqOne</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiQueue</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">queue</span></span>, <span class="n"><span class="pre">dpiMsgProps</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">props</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiQueue_deqOne" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Dequeues a single message from the queue.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>queue</strong> [IN] – the queue from which the messages is to be dequeued. If
the reference is NULL or invalid, an error is returned.</p>
<p><strong>props</strong> [OUT] – a pointer to a reference to a message property which
will be populated upon successful completion of this function. This
reference should be released when it is no longer needed by calling the
function <a class="reference internal" href="dpiMsgProps.html#c.dpiMsgProps_release" title="dpiMsgProps_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiMsgProps_release()</span></code></a>. If no messages are available, this
reference will be NULL.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiQueue_enqMany">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiQueue_enqMany</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiQueue</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">queue</span></span>, <span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n"><span class="pre">numProps</span></span>, <span class="n"><span class="pre">dpiMsgProps</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">props</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiQueue_enqMany" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enqueues multiple messages into the queue.</p>
<p>Warning: calling this function in parallel on different connections
acquired from the same pool may fail due to Oracle bug 29928074. Ensure
that this function is not run in parallel, use standalone connections or
connections from different pools, or make multiple calls to
<a class="reference internal" href="#c.dpiQueue_enqOne" title="dpiQueue_enqOne"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiQueue_enqOne()</span></code></a> instead. The function <a class="reference internal" href="#c.dpiQueue_deqMany" title="dpiQueue_deqMany"><code class="xref c c-func docutils literal notranslate"><span class="pre">dpiQueue_deqMany()</span></code></a>
call is not affected.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>queue</strong> [IN] – the queue into which the messages are to be enqueued. If
the reference is NULL or invalid, an error is returned.</p>
<p><strong>numProps</strong> [IN] – the number of messages that are to be enqueued.</p>
<p><strong>props</strong> [IN] – an array of references to message properties that are to
be enqueued. The length of the array is specified by the numProps
parameter. Each of the message properties must have the right type of
payload associated before calling this method or an error will occur.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiQueue_enqOne">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiQueue_enqOne</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiQueue</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">queue</span></span>, <span class="n"><span class="pre">dpiMsgProps</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">props</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiQueue_enqOne" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Enqueues a single mesasge into the queue.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>queue</strong> [IN] – the queue into which the message is to be enqueued. If
the reference is NULL or invalid, an error is returned.</p>
<p><strong>props</strong> [IN] – a reference to the message that is to be enqueued. The
message properties must have the right type of payload associated before
calling this method or an error will occur.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiQueue_getDeqOptions">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiQueue_getDeqOptions</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiQueue</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">queue</span></span>, <span class="n"><span class="pre">dpiDeqOptions</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">options</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiQueue_getDeqOptions" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns a reference to the dequeue options associated with the queue. These
options affect how messages are dequeued.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>queue</strong> [IN] – the queue from which the dequeue options are to be
retrieved. If the reference is NULL or invalid, an error is returned.</p>
<p><strong>options</strong> [OUT] – a reference to the dequeue options associated with the
queue which will be populated upon successful completion of this function.
This reference is owned by the queue and will remain valid as long as a
reference to the queue is held.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiQueue_getEnqOptions">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiQueue_getEnqOptions</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiQueue</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">queue</span></span>, <span class="n"><span class="pre">dpiEnqOptions</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">options</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiQueue_getEnqOptions" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Returns a reference to the enqueue options associated with the queue. These
options affect how messages are enqueued.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>queue</strong> [IN] – the queue from which the enqueue options are to be
retrieved. If the reference is NULL or invalid, an error is returned.</p>
<p><strong>options</strong> [OUT] – a reference to the enqueue options associated with the
queue which will be populated upon successful completion of this function.
This reference is owned by the queue and will remain valid as long as a
reference to the queue is held.</p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.dpiQueue_release">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dpiQueue_release</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">dpiQueue</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">queue</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dpiQueue_release" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Releases a reference to the queue. A count of the references to the queue
is maintained and when this count reaches zero, the memory associated with
the queue is freed.</p>
<p>The function returns DPI_SUCCESS for success and DPI_FAILURE for failure.</p>
<p><strong>queue</strong> [IN] – the queue from which a reference is to be released. If
the reference is NULL or invalid, an error is returned.</p>
</dd></dl>

</section>
 
          </div>
      </div>

      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
      &#169; Copyright 2016, 2022, Oracle and/or its affiliates. All rights reserved.
    </div>
  </body>
</html>